{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst limit = 15;\n\nexport const getPhoto = async (value, page = 1) => {\n    const KEY = \"43058085-482a34128d0dce777e17b7853\";\n    const url = await axios.get(`https://pixabay.com/api/`, {\n        params: {\n            key: KEY,\n            q: value,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: limit,\n            page,\n        }\n    });\n   \n    return url.data;\n}\n\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst gallery = document.querySelector('.gallery');\nexport function imageTemplate(data) {\n  const markup = data\n  .map(\n    el => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n    <img\n            src=\"${el.webformatURL}\"\n            alt=\"${el.tags}\"\n            width=\"360\"\n            height=\"200\"\n            class=\"gallery-img\"\n        />\n        <ul class=\"gal-list\">\n        <li class=\"gal-link\"><span class=\"gal-span\">Likes</span> ${el.likes}</li>\n        <li class=\"gal-link\"><span class=\"gal-span\">Views</span> ${el.views}</li>\n        <li class=\"gal-link\"><span class=\"gal-span\">Comments</span> ${el.comments}</li>\n        <li class=\"gal-link\"><span class=\"gal-span\">Downloads</span> ${el.downloads}</li>\n     </ul>\n  </a>\n</li>`).join(\"\")\ngallery.insertAdjacentHTML('beforeend', markup);\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250\n});\nlightbox.refresh();\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getPhoto } from './js/pixabay-api.js';\nimport { imageTemplate } from './js/render-function.js';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.querySelector('.gallery');\nconst load = document.querySelector('.loading');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst galItem = document.querySelector(\".gallery-item\");\n\nlet query;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.warning({\n      message: 'Were sorry, but youve reached the end of search results.',\n      color: 'red',\n      position: 'topRight',\n    })\n  } else {\n    showLoadMore();\n  }\n}\n\nfunction showLoadMore() {\n  btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadMore() {\n  btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoader() {\n  load.classList.add('loader');\n}\n\nfunction hideLoader() {\n  load.classList.remove('loader');\n}\n hideLoadMore()\n// ----------------Кнопка загрузить еще---------------//\nbtnLoadMore.addEventListener('click', handleClickLoadMore);\n\nasync function handleClickLoadMore() {\n  currentPage += 1;\n  hideLoadMore();\n  showLoader();\n  try {\n    const data = await getPhoto(query, currentPage);\n    imageTemplate(data.hits);\n  } catch (err) {\n    console.error('Error fetching data:', err);\n    hideLoadMore();\n  }\n  myScroll();\n  checkBtnStatus();\n  hideLoader();\n  showLoadMore();\n}\n// ----------------Кнопка загрузить еще---------------//\n\n// --------------------------Кнопка основная---------------------------//\nsearchForm.addEventListener('submit', handleSubmit);\nasync function handleSubmit(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  currentPage = 1;\n  query = event.target.elements.query.value.trim();\n  if (query === '') {\n    return iziToast.warning({ message: \"Please try again! Write something.\", position: \"topRight\", color: \"red\" })\n  }\n  try {\n    showLoader();\n    const data = await getPhoto(query, currentPage);\n     if (data.hits.length === 0) {\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          color: 'red',\n          position: 'topRight',\n        });\n       gallery.innerHTML = '';\n       event.target.reset();\n       hideLoader();\n       hideLoadMore();\n        return;\n  } \n    maxPage = Math.ceil(data.totalHits / pageSize);\n    imageTemplate(data.hits);\n  } catch (err) {\n    console.error('Error fetching data:', err);\n    gallery.innerHTML = '';\n    hideLoadMore();\n  }\n  checkBtnStatus();\n  event.target.reset();\n  hideLoader()\n}\n// --------------------------Кнопка основная---------------------------//\nfunction myScroll() {\n  const height = galItem.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n\n\n\n\n\n\n\n\n"],"names":["limit","getPhoto","value","page","KEY","axios","gallery","imageTemplate","data","markup","el","SimpleLightbox","searchForm","load","btnLoadMore","galItem","query","currentPage","maxPage","pageSize","checkBtnStatus","hideLoadMore","iziToast","showLoadMore","showLoader","hideLoader","handleClickLoadMore","err","myScroll","handleSubmit","event","height"],"mappings":"owBAEA,MAAMA,EAAQ,GAEDC,EAAW,MAAOC,EAAOC,EAAO,IAAM,CAC/C,MAAMC,EAAM,qCAaZ,OAZY,MAAMC,EAAM,IAAI,2BAA4B,CACpD,OAAQ,CACJ,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAAG,CACH,CACT,CAAK,GAEU,IACf,ECjBMG,EAAU,SAAS,cAAc,UAAU,EAC1C,SAASC,EAAcC,EAAM,CAClC,MAAMC,EAASD,EACd,IACCE,GAAM;AAAA,kCACwBA,EAAG,aAAa;AAAA;AAAA,mBAE/BA,EAAG,YAAY;AAAA,mBACfA,EAAG,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEAMyCA,EAAG,KAAK;AAAA,mEACRA,EAAG,KAAK;AAAA,sEACLA,EAAG,QAAQ;AAAA,uEACVA,EAAG,SAAS;AAAA;AAAA;AAAA,MAG7E,EAAE,KAAK,EAAE,EACfJ,EAAQ,mBAAmB,YAAaG,CAAM,EAC7B,IAAIE,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EACQ,QAAO,CAChB,CCvBA,MAAMC,EAAa,SAAS,eAAe,aAAa,EACpC,SAAS,eAAe,cAAc,EAC1D,MAAMN,EAAU,SAAS,cAAc,UAAU,EAC3CO,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAU,SAAS,cAAc,eAAe,EAEtD,IAAIC,EACAC,EAAc,EACdC,EAAU,EACd,MAAMC,EAAW,GAEjB,SAASC,GAAiB,CACpBH,GAAeC,GACjBG,IACAC,EAAS,QAAQ,CACf,QAAS,2DACT,MAAO,MACP,SAAU,UAChB,CAAK,GAEDC,GAEJ,CAEA,SAASA,GAAe,CACtBT,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASO,GAAe,CACtBP,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASU,GAAa,CACpBX,EAAK,UAAU,IAAI,QAAQ,CAC7B,CAEA,SAASY,GAAa,CACpBZ,EAAK,UAAU,OAAO,QAAQ,CAChC,CACCQ,EAAc,EAEfP,EAAY,iBAAiB,QAASY,CAAmB,EAEzD,eAAeA,GAAsB,CACnCT,GAAe,EACfI,IACAG,IACA,GAAI,CACF,MAAMhB,EAAO,MAAMP,EAASe,EAAOC,CAAW,EAC9CV,EAAcC,EAAK,IAAI,CACxB,OAAQmB,EAAK,CACZ,QAAQ,MAAM,uBAAwBA,CAAG,EACzCN,GACD,CACDO,IACAR,IACAK,IACAF,GACF,CAIAX,EAAW,iBAAiB,SAAUiB,CAAY,EAClD,eAAeA,EAAaC,EAAO,CAKjC,GAJAA,EAAM,eAAc,EACpBxB,EAAQ,UAAY,GACpBW,EAAc,EACdD,EAAQc,EAAM,OAAO,SAAS,MAAM,MAAM,OACtCd,IAAU,GACZ,OAAOM,EAAS,QAAQ,CAAE,QAAS,qCAAsC,SAAU,WAAY,MAAO,MAAO,EAE/G,GAAI,CACFE,IACA,MAAMhB,EAAO,MAAMP,EAASe,EAAOC,CAAW,EAC7C,GAAIT,EAAK,KAAK,SAAW,EAAG,CACzBc,EAAS,MAAM,CACb,QAAS,2EACT,MAAO,MACP,SAAU,UACpB,CAAS,EACFhB,EAAQ,UAAY,GACpBwB,EAAM,OAAO,QACbL,IACAJ,IACC,MACL,CACCH,EAAU,KAAK,KAAKV,EAAK,UAAYW,CAAQ,EAC7CZ,EAAcC,EAAK,IAAI,CACxB,OAAQmB,EAAK,CACZ,QAAQ,MAAM,uBAAwBA,CAAG,EACzCrB,EAAQ,UAAY,GACpBe,GACD,CACDD,IACAU,EAAM,OAAO,QACbL,EAAY,CACd,CAEA,SAASG,GAAW,CAClB,MAAMG,EAAShB,EAAQ,sBAAqB,EAAG,OAE/C,OAAO,SAAS,CACd,IAAKgB,EACL,SAAU,QACd,CAAG,CACH"}